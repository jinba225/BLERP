# Better Laser ERP 核心流程任务清单

**更新日期**: 2025-11-09

---

## 📋 快速状态总览

```
✅ 已完成      🟢 85%~100%
⚠️ 部分完成    🟡 40%~84%
❌ 未实现      🔴 0%~39%
```

---

## 一、采购流程 🟢 85%

### 1. 采购申请 ✅ 已完成
- [x] 创建采购申请
- [x] 提交审核
- [x] 审核通过/拒绝
- [x] 转采购订单
- [ ] **财务预算审核** ❌
- [ ] **多级审批流配置** ❌

### 2. 采购执行 ✅ 已完成
- [x] 采购订单CRUD
- [x] 订单审核
- [x] 订单状态跟踪
- [ ] **供应商邮件通知** ⚠️

### 3. 仓库入库 ✅ 已完成
- [x] 收货单创建
- [x] 部分收货支持
- [x] 库存同步
- [x] 订单状态更新
- [ ] **质检单功能** ❌

### 4. 财务对账付款 🟡 40%
- [ ] **自动对账清单** ❌
- [ ] **发票管理** ❌
- [x] 应付账款模型
- [ ] **应付账款自动生成** ❌
- [x] 付款记录
- [ ] **付款核销逻辑** ❌
- [ ] **付款提醒** ❌

---

## 二、销售流程 🟢 90%

### 1. 销售发起 ✅ 已完成
- [x] 报价单管理
- [x] 报价转订单
- [x] 销售订单CRUD
- [x] 未发货数量跟踪
- [x] 打印模板

### 2. 分批发货执行 🟡 80%
- [ ] **信用额度校验** ❌
- [x] 发货单创建
- [x] 部分发货支持
- [x] 库存扣减
- [x] 订单状态更新
- [x] 发货确认

### 3. 对账开票 🟡 30%
- [ ] **自动对账清单** ❌
- [ ] **发票管理** ❌
- [x] 应收账款模型
- [ ] **应收账款自动生成** ❌

### 4. 财务收款 🟡 50%
- [x] 收款记录
- [ ] **收款核销逻辑** ❌
- [ ] **订单自动完成** ❌

---

## 三、借用流程 🔴 0%

### 1. 销售借用流程 ❌ 未实现
- [ ] SalesLoan 模型
- [ ] 借用单CRUD
- [ ] 审批流程
- [ ] 借转销逻辑
- [ ] 归还流程

### 2. 采购借用流程 ❌ 未实现
- [ ] PurchaseLoan 模型
- [ ] 借用单CRUD
- [ ] 审批流程
- [ ] 借转采购逻辑
- [ ] 归还流程

---

## 四、退换货流程 🟡 70%

### 1. 销售退换货 🟡 70%
- [x] 退货申请
- [x] 退货审批
- [x] 入库单生成
- [x] 退货统计
- [ ] **应收冲销账单** ❌
- [ ] **财务核销** ❌
- [ ] **换货记录** ❌

### 2. 采购退换货 🟡 70%
- [x] 退货申请
- [x] 退货审批
- [x] 出库单生成
- [x] 退货统计
- [ ] **财务退款逻辑** ❌
- [ ] **应付冲销账单** ❌
- [ ] **换货记录** ❌

---

## 五、财务集成 🟡 60%

### 已实现
- [x] 会计科目
- [x] 记账凭证
- [x] 客户应收账款模型
- [x] 供应商应付账款模型
- [x] 收付款记录模型
- [x] 预算管理模型

### 缺失功能
- [ ] **发票管理** ❌
- [ ] **自动对账** ❌
- [ ] **账款自动生成** ❌
- [ ] **账款核销自动化** ❌
- [ ] **预算审核集成** ❌
- [ ] **财务报表** ❌

---

## 🎯 核心缺失功能总结

### 🔴 关键缺失 (阻碍业务闭环)
1. ❌ **发票管理模块** (采购/销售统一)
2. ❌ **自动对账功能** (采购对账、销售对账)
3. ❌ **应收/应付账款自动生成** (业务触发)
4. ❌ **账款核销自动化** (收付款核销)
5. ❌ **信用额度校验** (销售风险控制)
6. ❌ **借用流程** (完全缺失)

### 🟡 重要缺失 (流程完善)
7. ⚠️ **财务预算审核** (采购申请环节)
8. ⚠️ **质检单功能** (采购收货环节)
9. ⚠️ **退货财务处理** (冲销逻辑)
10. ⚠️ **供应商通知** (邮件集成)

### 🟢 优化项 (锦上添花)
11. ⚠️ **财务报表** (应收/应付账龄、现金流)
12. ⚠️ **凭证自动生成** (业务单据触发)
13. ⚠️ **付款提醒** (到期提醒)

---

## 📊 实施优先级建议

### 第一批 (2周) - 财务闭环
1. **发票管理模块** (3天)
2. **采购对账与应付自动生成** (3天)
3. **销售对账与应收自动生成** (3天)
4. **账款核销逻辑** (2天)
5. **信用额度校验** (2天)

### 第二批 (2周) - 借用流程
6. **销售借用模块** (5天)
7. **采购借用模块** (5天)

### 第三批 (1周) - 流程优化
8. **退货财务优化** (2天)
9. **财务预算审核** (2天)
10. **质检单功能** (3天)

### 第四批 (按需) - 增强功能
11. **财务报表**
12. **凭证自动生成**
13. **供应商通知**

---

## 🚀 快速行动指南

### 如果主人要立即开始，浮浮酱建议:

#### 方案A: 财务优先 (推荐)
```bash
# 1. 创建发票模块
cd apps/finance
# 添加 Invoice 模型

# 2. 实现自动对账
# 修改 apps/purchase/views.py - receipt_receive
# 修改 apps/sales/views.py - delivery_ship

# 3. 实现核销逻辑
# 修改 apps/finance/views.py - payment相关视图
```

#### 方案B: 借用优先
```bash
# 1. 创建销售借用模块
cd apps/sales
# 新建 models_loan.py, views_loan.py

# 2. 创建采购借用模块
cd apps/purchase
# 新建 models_loan.py, views_loan.py
```

---

**提示**: 详细实施方案请参考 `核心流程实施状况评估.md`

**浮浮酱在此**: 主人随时可以让浮浮酱开始实施任何一个任务喵~ φ(≧ω≦*)♪
