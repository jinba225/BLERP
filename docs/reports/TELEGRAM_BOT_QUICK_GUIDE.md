# Telegram Bot 自然语言操作快速指南

## 📖 概述

本文档提供Django ERP Telegram Bot的自然语言操作示例，帮助用户快速了解如何通过对话方式完成ERP业务操作。

---

## 🎯 支持的操作类型

### 查询类操作 (低风险，无需确认)

#### 销售查询
- 查询发货单
- 查询退货单
- 查询借货单
- 查询订单详情
- 搜索客户

#### 采购查询
- 查询询价单
- 查询供应商报价
- 查询收货单
- 查询采购退货
- 查询采购借出
- 搜索供应商

#### 库存查询
- 查询仓库
- 查询库存调拨
- 查询库存盘点
- 查询入库单
- 查询出库单
- 查询库存调整
- 检查库存
- 搜索产品

#### 财务查询
- 查询会计科目
- 查询会计凭证
- 查询客户账
- 查询供应商账
- 查询收付款记录
- 查询预付款
- 查询费用报销
- 查询发票

---

## 💬 自然语言示例

### 销售模块示例

#### 查询发货单

```
用户: 查询所有发货单
Bot: 找到 15 个发货单...

用户: 查询今天已发货的订单
Bot: 找到 3 个发货单...

用户: 查询发货单 DO2025010001 的详情
Bot: 发货单 DO2025010001 详情...
```

#### 查询退货单

```
用户: 查询2025年1月的退货单
Bot: 找到 5 个退货单...

用户: 查询待审核的退货
Bot: 找到 2 个退货单...
```

#### 查询借货单

```
用户: 查询所有借货单
Bot: 找到 8 个借货单...

用户: 查询北京科技有限公司的借货记录
Bot: 找到 3 个借货单...
```

### 采购模块示例

#### 查询询价单

```
用户: 查询所有询价单
Bot: 找到 12 个询价单...

用户: 查询已发送的询价
Bot: 找到 8 个询价单...
```

#### 查询供应商报价

```
用户: 查询询价单 IQ2025010001 的报价
Bot: 找到 3 个供应商报价...

用户: 查询已选定的报价
Bot: 找到 5 个报价...
```

#### 查询收货单

```
用户: 查询本月的收货单
Bot: 找到 20 个收货单...

用户: 查询待质检的收货
Bot: 找到 3 个收货单...
```

### 库存模块示例

#### 查询仓库

```
用户: 查询所有仓库
Bot: 找到 5 个仓库...

用户: 查询启用的仓库
Bot: 找到 4 个仓库...
```

#### 查询库存调拨

```
用户: 查询所有调拨单
Bot: 找到 10 个调拨单...

用户: 查询在途的调拨
Bot: 找到 2 个调拨单...
```

#### 查询盘点单

```
用户: 查询本月的盘点
Bot: 找到 3 个盘点单...

用户: 查询已完成盘点
Bot: 找到 8 个盘点单...
```

#### 查询出入库单

```
用户: 查询本周的入库单
Bot: 找到 15 个入库单...

用户: 查询待审核的出库
Bot: 找到 2 个出库单...
```

### 财务模块示例

#### 查询会计科目

```
用户: 查询所有会计科目
Bot: 找到 120 个会计科目...

用户: 查询资产类科目
Bot: 找到 40 个科目...
```

#### 查询会计凭证

```
用户: 查询本月的会计凭证
Bot: 找到 50 个凭证...

用户: 查询已审核的凭证
Bot: 找到 45 个凭证...
```

#### 查询客户账

```
用户: 查询所有客户账
Bot: 找到 80 个客户...

用户: 查询有欠款的客户
Bot: 找到 15 个客户...
```

#### 查询供应商账

```
用户: 查询所有供应商账
Bot: 找到 60 个供应商...

用户: 查询应付账款余额
Bot: 找到 25 个供应商...
```

#### 查询收付款

```
用户: 查询本月的收款记录
Bot: 找到 30 条收款记录...

用户: 查询待付款的记录
Bot: 找到 5 条付款记录...
```

#### 查询预付款

```
用户: 查询所有客户预付款
Bot: 找到 12 条预付款...

用户: 查询可用余额的预付款
Bot: 找到 8 条预付款...
```

#### 查询费用报销

```
用户: 查询本月的费用报销
Bot: 找到 25 条费用记录...

用户: 查询待审批的差旅费
Bot: 找到 3 条费用记录...
```

#### 查询发票

```
用户: 查询本月开出的发票
Bot: 找到 40 张发票...

用户: 查询进项增值税发票
Bot: 找到 15 张发票...
```

---

## 🔍 高级查询技巧

### 组合条件查询

```
用户: 查询2025年1月北京科技有限公司的退货单
Bot: [组合筛选] 找到 2 个退货单...

用户: 查询已完成、金额大于1万的入库单
Bot: [组合筛选] 找到 5 个入库单...
```

### 日期范围查询

```
用户: 查询上个月的收货单
Bot: [自动计算日期] 找到 18 个收货单...

用户: 查询2025年第一季度的费用报销
Bot: [自动计算日期] 找到 75 条费用记录...
```

### 关键词搜索

```
用户: 搜索发货单号包含 "DO202501"
Bot: 找到 10 个发货单...

用户: 查询客户名称包含 "科技" 的订单
Bot: 找到 8 个订单...
```

### 分页查询

```
用户: 查询前10个会计凭证
Bot: 找到 10 个凭证...

用户: 显示更多结果
Bot: [返回下一页]
```

---

## ⚡ 快捷命令

### 常用查询命令

```
/today - 查询今天的所有业务
/week - 查询本周的所有业务
/month - 查询本月所有业务

/pending - 查询所有待处理事项
/alerts - 查询所有预警信息

/reports - 查看报表菜单
/help - 显示帮助信息
```

### 快速筛选命令

```
/status:pending - 只显示待处理
/status:approved - 只显示已审核
/status:completed - 只显示已完成

/type:sales - 只显示销售相关
/type:purchase - 只显示采购相关
/type:inventory - 只显示库存相关
/type:finance - 只显示财务相关
```

---

## 📊 统计和报表

### 销售统计

```
用户: 生成本月销售报表
Bot: [生成报表] 已生成销售报表...
   - 总订单数: 150
   - 总销售额: ¥1,500,000
   - 已发货订单: 120
   - 待发货订单: 30
```

### 采购统计

```
用户: 生成本月采购报表
Bot: [生成报表] 已生成采购报表...
   - 采购订单数: 80
   - 采购总额: ¥800,000
   - 已收货订单: 65
   - 待收货订单: 15
```

### 库存统计

```
用户: 生成库存统计报表
Bot: [生成报表] 已生成库存报表...
   - 产品总数: 500
   - 库存总值: ¥5,000,000
   - 低库存产品: 15
   - 缺货产品: 3
```

---

## 💡 使用技巧

### 1. 自然表达

```
✅ 推荐: "查询今天已发货的订单"
✅ 推荐: "帮我查一下北京科技有限公司的退货单"
✅ 推荐: "显示所有待审核的费用报销"

❌ 不推荐: "query_deliveries status=shipped date=today"
```

### 2. 精确描述

```
✅ 具体: "查询2025年1月北京科技有限公司的退货单"
❌ 模糊: "查查退货的"

✅ 具体: "显示状态为待审核、金额大于5000元的费用"
❌ 模糊: "看看费用"
```

### 3. 分步查询

```
用户: 查询所有待处理事项
Bot: [汇总显示]
   - 待审核订单: 5个
   - 待发货订单: 8个
   - 待收货订单: 3个
   - 待审批费用: 2个

用户: 显示待审核订单的详情
Bot: [显示详情]
```

### 4. 使用上下文

```
用户: 查询北京科技有限公司的信息
Bot: [显示客户基本信息]

用户: 查询他们的订单（自动指代北京科技）
Bot: [显示该公司订单列表]

用户: 最早的订单状态是什么？（自动指代订单列表）
Bot: 订单 SO2025010001，状态：已发货
```

---

## 🔐 权限和审批

### 查询权限

- ✅ 所有用户都可以进行查询操作
- ✅ 查询操作不需要审批
- ✅ 查询结果根据用户权限自动过滤

### 创建权限

- ⚠️ 创建操作需要相应的业务权限
- ⚠️ 中高风险操作需要确认
- ⚠️ 高风险操作需要审批流程

---

## 📞 获取帮助

### 随时求助

```
用户: 帮助
Bot: [显示帮助菜单]
   支持的操作类型：
   1. 查询操作 - 无需权限
   2. 创建操作 - 需要权限
   3. 审核操作 - 需要审批

   输入 /help 查看详细帮助

用户: 如何查询库存？
Bot: [显示库存查询指南]
   您可以使用以下方式查询库存：
   - "查询所有仓库"
   - "查询产品XXX的库存"
   - "显示低库存预警"
   - "查询仓库YYY的库存"
```

---

## 🎯 最佳实践

### 1. 明确查询目标

在提问前明确你想查询什么，这样可以获得更精确的结果。

### 2. 使用具体条件

提供具体的筛选条件（日期、状态、客户等），避免返回过多结果。

### 3. 分批查询大数据

对于可能返回大量结果的查询，建议使用日期范围或数量限制。

### 4. 利用上下文

在连续对话中，Bot会记住上下文，可以简化后续查询。

### 5. 及时反馈

如果查询结果不准确，可以提供更多细节或重新描述需求。

---

## 📈 性能指标

- 查询响应时间: < 1秒
- 支持并发用户: 100+
- 查询结果缓存: 5分钟TTL
- 每日查询次数: 无限制

---

## 🔄 持续更新

本Bot将持续更新，逐步支持更多操作：

- ✅ 第一阶段: 查询功能（已完成）
- 🔄 第二阶段: 创建功能（开发中）
- ⏳ 第三阶段: 审核功能（计划中）
- ⏳ 第四阶段: 高级功能（计划中）

---

## 📚 相关文档

- [第一阶段完成总结](PHASE1_COMPLETION_SUMMARY.md)
- [实施计划](TELEGRAM_BOT_IMPLEMENTATION_PLAN.md)
- [API文档](docs/API.md)
- [开发文档](docs/DEVELOPMENT.md)

---

**最后更新**: 2026年2月5日
**版本**: v1.0 (第一阶段)
**状态**: ✅ 生产就绪
