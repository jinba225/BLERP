# BLERP ç³»ç»Ÿæ¶æ„æ–‡æ¡£

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

BLERP (BetterLaser ERP) é‡‡ç”¨ç»å…¸çš„**åˆ†å±‚æ¶æ„**æ¨¡å¼ï¼Œç»“åˆ Django çš„ MTV (Model-Template-View) è®¾è®¡æ¨¡å¼å’Œ RESTful API æ¶æ„ï¼Œæ„å»ºäº†ä¸€ä¸ªç°ä»£åŒ–ã€å¯æ‰©å±•çš„ä¼ä¸šçº§ ERP ç³»ç»Ÿã€‚

### æ¶æ„é£æ ¼

- **æ¶æ„æ¨¡å¼**: åˆ†å±‚æ¶æ„ (Layered Architecture)
- **è®¾è®¡èŒƒå¼**: MTV + REST API
- **éƒ¨ç½²æ¨¡å¼**: å•ä½“åº”ç”¨ (Monolith)
- **æ‰©å±•æ–¹å¼**: å‚ç›´æ‰©å±• + æ°´å¹³æ‰©å±•

## ğŸ“ ç³»ç»Ÿåˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¡¨ç°å±‚ (Presentation Layer)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Web ç•Œé¢        â”‚      â”‚   REST API       â”‚         â”‚
â”‚  â”‚  (Tailwind CSS)  â”‚      â”‚   (DRF)          â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    åº”ç”¨å±‚ (Application Layer)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   ä¸šåŠ¡è§†å›¾        â”‚      â”‚   API ViewSets  â”‚         â”‚
â”‚  â”‚  (Views.py)      â”‚      â”‚   (ViewSets)     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    ä¸šåŠ¡å±‚ (Business Layer)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   ä¸šåŠ¡æœåŠ¡        â”‚      â”‚   ä¸šåŠ¡é€»è¾‘       â”‚         â”‚
â”‚  â”‚  (Services)      â”‚      â”‚   (Models)       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    æ•°æ®å±‚ (Data Layer)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   ORM æ˜ å°„        â”‚      â”‚   æ•°æ®åº“         â”‚         â”‚
â”‚  â”‚  (Django ORM)    â”‚      â”‚   (MySQL)        â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Nginx   â”‚  â”‚ Gunicorn â”‚  â”‚  Redis   â”‚  â”‚  Celery  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ æ ¸å¿ƒæ¶æ„è®¾è®¡

### 1. æ¨¡å—åŒ–æ¶æ„

ç³»ç»Ÿé‡‡ç”¨**æ¨¡å—åŒ–è®¾è®¡**ï¼Œ12 ä¸ªä¸šåŠ¡æ¨¡å—ç›¸äº’ç‹¬ç«‹ï¼Œé€šè¿‡ç»Ÿä¸€çš„åŸºç¡€æ¨¡å—è¿›è¡Œåè°ƒã€‚

#### æ¨¡å—ä¾èµ–å…³ç³»

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Core     â”‚  â† æ ¸å¿ƒåŸºç¡€æ¨¡å—
                    â”‚  (åŸºç¡€å±‚)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†‘
                           â”‚ è¢«ä¾èµ–
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth/Users   â”‚  â”‚  Base Data   â”‚  â”‚  AI Assistant â”‚
â”‚  (è®¤è¯ç”¨æˆ·)   â”‚  â”‚  (åŸºç¡€æ•°æ®)   â”‚  â”‚  (AIåŠ©æ‰‹)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†‘                  â†‘                  â†‘
        â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Business Layer                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Sales   â”‚  â”‚Purchase â”‚  â”‚Inventoryâ”‚  â”‚Finance  â”‚ â”‚
â”‚  â”‚(é”€å”®)   â”‚  â”‚(é‡‡è´­)   â”‚  â”‚(åº“å­˜)   â”‚  â”‚(è´¢åŠ¡)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ¨¡å—èŒè´£

##### æ ¸å¿ƒåŸºç¡€æ¨¡å— (core/)
- **èŒè´£**: æä¾›æ‰€æœ‰æ¨¡å—å…±äº«çš„åŸºç¡€åŠŸèƒ½
- **ä¸»è¦ç»„ä»¶**:
  - `BaseModel`: ç»Ÿä¸€åŸºç¡€æ¨¡å‹ï¼ˆæ—¶é—´æˆ³ã€è½¯åˆ é™¤ã€å®¡è®¡ï¼‰
  - `DocumentNumberGenerator`: å•æ®å·ç”Ÿæˆå™¨
  - `SystemConfig`: ç³»ç»Ÿé…ç½®ç®¡ç†
  - `AuditLog`: å®¡è®¡æ—¥å¿—
  - `Attachment`: é™„ä»¶ç®¡ç†

##### è®¤è¯ç”¨æˆ·æ¨¡å— (authentication/, users/, departments/)
- **èŒè´£**: ç”¨æˆ·èº«ä»½è®¤è¯å’Œæˆæƒç®¡ç†
- **ä¸»è¦ç»„ä»¶**:
  - JWT è®¤è¯ç³»ç»Ÿ
  - ç”¨æˆ·è´¦æˆ·ç®¡ç†
  - éƒ¨é—¨æ ‘å½¢ç»“æ„
  - æƒé™æ§åˆ¶ç³»ç»Ÿ

##### åŸºç¡€æ•°æ®æ¨¡å— (customers/, suppliers/, products/)
- **èŒè´£**: ä¸»æ•°æ®ç®¡ç†
- **ä¸»è¦ç»„ä»¶**:
  - å®¢æˆ·ä¿¡æ¯ç®¡ç†
  - ä¾›åº”å•†ç®¡ç†
  - äº§å“ç›®å½•ç®¡ç†
  - ä»·æ ¼è¡¨ä½“ç³»

##### ä¸šåŠ¡æµç¨‹æ¨¡å— (sales/, purchase/, inventory/, finance/)
- **èŒè´£**: æ ¸å¿ƒä¸šåŠ¡æµç¨‹ç®¡ç†
- **ä¸»è¦ç»„ä»¶**:
  - é”€å”®æµç¨‹ï¼ˆæŠ¥ä»·â†’è®¢å•â†’å‘è´§â†’é€€è´§ï¼‰
  - é‡‡è´­æµç¨‹ï¼ˆç”³è¯·â†’è®¢å•â†’æ”¶è´§â†’é€€è´§ï¼‰
  - åº“å­˜ç®¡ç†ï¼ˆå…¥åº“â†’å‡ºåº“â†’è°ƒæ‹¨â†’ç›˜ç‚¹ï¼‰
  - è´¢åŠ¡æ ¸ç®—ï¼ˆå‡­è¯â†’è´¦åŠ¡â†’æŠ¥è¡¨ï¼‰

### 2. æ•°æ®æ¨¡å‹æ¶æ„

#### ç»Ÿä¸€åŸºç±»è®¾è®¡

```python
# BaseModel ç»Ÿä¸€åŸºç¡€æ¨¡å‹
class BaseModel(TimeStampedModel, SoftDeleteModel):
    """
    æä¾›ç»Ÿä¸€çš„åŸºç¡€åŠŸèƒ½ï¼š
    - æ—¶é—´æˆ³: created_at, updated_at
    - è½¯åˆ é™¤: is_deleted, deleted_at
    - å®¡è®¡è¿½è¸ª: created_by, updated_by
    """
    pass

# æ‰€æœ‰ä¸šåŠ¡æ¨¡å‹ç»§æ‰¿ BaseModel
class SalesOrder(BaseModel):
    order_number = models.CharField(max_length=50)
    customer = models.ForeignKey('customers.Customer')
    # ... å…¶ä»–å­—æ®µ
```

#### æ•°æ®å…³ç³»è®¾è®¡

- **ä¸€å¯¹ä¸€**: æ‰©å±•ä¿¡æ¯ï¼ˆå¦‚å®¢æˆ·æ‰©å±•ä¿¡æ¯ï¼‰
- **ä¸€å¯¹å¤š**: ä¸»ä»å…³ç³»ï¼ˆå¦‚å®¢æˆ·-è®¢å•ï¼‰
- **å¤šå¯¹å¤š**: å…³è”å…³ç³»ï¼ˆå¦‚äº§å“-åˆ†ç±»ï¼‰
- **è‡ªå¼•ç”¨**: æ ‘å½¢ç»“æ„ï¼ˆå¦‚éƒ¨é—¨-å­éƒ¨é—¨ï¼‰

### 3. ä¸šåŠ¡æµç¨‹æ¶æ„

#### é”€å”®ä¸šåŠ¡æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æŠ¥ä»·å•   â”‚ -> â”‚ é”€å”®è®¢å• â”‚ -> â”‚ å‘è´§å•   â”‚ -> â”‚ å®Œæˆç¡®è®¤ â”‚
â”‚ Quote    â”‚    â”‚ Order    â”‚    â”‚Delivery  â”‚    â”‚ Complete â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     |               |               |               |
     v               v               v               v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è½¬è®¢å•    â”‚    â”‚ å®¡æ ¸ç¡®è®¤  â”‚    â”‚ åº“å­˜æ‰£å‡  â”‚    â”‚ åº”æ”¶æ ¸é”€  â”‚
â”‚ Convert  â”‚    â”‚ Approve  â”‚    â”‚Inventory â”‚    â”‚Payment   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¯é€‰æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é”€å”®é€€è´§ â”‚ -> â”‚ å®¡æ ¸ç¡®è®¤  â”‚ -> â”‚ åº“å­˜å›è¡¥  â”‚
â”‚ Return   â”‚    â”‚ Approve  â”‚    â”‚Inventory â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ ¸å¿ƒä¸šåŠ¡è§„åˆ™

1. **æŠ¥ä»·å•è½¬è®¢å•**: ä¸€é”®è½¬æ¢ï¼Œä¿ç•™æ‰€æœ‰æ˜ç»†ä¿¡æ¯
2. **è®¢å•å®¡æ ¸**: è‡ªåŠ¨ç”Ÿæˆå‘è´§å•å’Œåº”æ”¶è´¦æ¬¾
3. **éƒ¨åˆ†å‘è´§**: æ”¯æŒå¤šæ¬¡å‘è´§ï¼Œè·Ÿè¸ªå·²å‘è´§æ•°é‡
4. **é€€è´§æµç¨‹**: ç”³è¯·â†’å®¡æ ¸â†’æ”¶è´§â†’åº“å­˜å›è¡¥â†’é€€æ¬¾

### 4. API æ¶æ„è®¾è®¡

#### RESTful API è®¾è®¡

```python
# ViewSet å±‚çº§è®¾è®¡
class SalesOrderViewSet(ModelViewSet):
    """
    é”€å”®è®¢å• API:
    - /api/sales-orders/              # åˆ—è¡¨å’Œåˆ›å»º
    - /api/sales-orders/{id}/         # è¯¦æƒ…å’Œæ›´æ–°
    - /api/sales-orders/{id}/approve/ # å®¡æ ¸è®¢å•
    - /api/sales-orders/{id}/delivery/# åˆ›å»ºå‘è´§
    """
    queryset = SalesOrder.objects.filter(is_deleted=False)
    serializer_class = SalesOrderSerializer
    permission_classes = [IsAuthenticated]

    @action(detail=True, methods=['post'])
    def approve(self, request, pk=None):
        """è®¢å•å®¡æ ¸ä¸šåŠ¡é€»è¾‘"""
        pass
```

#### API ç‰ˆæœ¬æ§åˆ¶

```python
# URL è®¾è®¡æ”¯æŒç‰ˆæœ¬æ§åˆ¶
urlpatterns = [
    path('api/v1/', include([
        path('sales-orders/', SalesOrderViewSet.as_view()),
        # ... å…¶ä»– API
    ])),
]
```

### 5. å‰ç«¯æ¶æ„

#### æ¨¡æ¿ç»§æ‰¿ä½“ç³»

```django
{# base.html #}
<!DOCTYPE html>
<html>
<head>
    {% block extra_css %}{% endblock %}
</head>
<body>
    {% block header %}{% endblock %}
    {% block content %}{% endblock %}
    {% block footer %}{% endblock %}
    {% block extra_js %}{% endblock %}
</body>
</html>

{# sales_order.html #}
{% extends "base.html" %}
{% block content %}
    {# è®¢å•è¯¦æƒ…å†…å®¹ #}
{% endblock %}
```

#### å‰ç«¯ç»„ä»¶åŒ–

- **å¸ƒå±€ç»„ä»¶**: å¯¼èˆªæ ã€ä¾§è¾¹æ ã€é¡µè„š
- **è¡¨å•ç»„ä»¶**: ç»Ÿä¸€çš„è¡¨å•æ ·å¼å’ŒéªŒè¯
- **æ•°æ®å±•ç¤ºç»„ä»¶**: è¡¨æ ¼ã€å¡ç‰‡ã€åˆ—è¡¨
- **äº¤äº’ç»„ä»¶**: æ¨¡æ€æ¡†ã€ä¸‹æ‹‰èœå•ã€æ ‡ç­¾é¡µ

### 6. å®‰å…¨æ¶æ„

#### è®¤è¯æˆæƒæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           è®¤è¯æˆæƒå±‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   JWT Auth   â”‚  â”‚  Session Authâ”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           æƒé™æ§åˆ¶å±‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Permission  â”‚  â”‚    Group     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           æ•°æ®è®¿é—®å±‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  QuerySet    â”‚  â”‚  Soft Delete â”‚     â”‚
â”‚  â”‚  è¿‡æ»¤        â”‚  â”‚  è½¯åˆ é™¤      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ•°æ®å®‰å…¨ç­–ç•¥

- **è½¯åˆ é™¤**: æ•°æ®ä¸ç‰©ç†åˆ é™¤ï¼Œå¯æ¢å¤
- **å®¡è®¡æ—¥å¿—**: è®°å½•æ‰€æœ‰å…³é”®æ“ä½œ
- **æƒé™éªŒè¯**: æ¥å£çº§å’Œå¯¹è±¡çº§æƒé™æ§åˆ¶
- **æ•°æ®åŠ å¯†**: æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨

### 7. éƒ¨ç½²æ¶æ„

#### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ¶æ„

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Nginx    â”‚  â† åå‘ä»£ç† + é™æ€æ–‡ä»¶æœåŠ¡
                    â”‚  (ç«¯å£ 80/443)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                    â”‚             â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Gunicorn    â”‚  â”‚   Static     â”‚
            â”‚  (ç«¯å£ 8000) â”‚  â”‚   Files      â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚          â”‚          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â” â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Django  â”‚ â”‚  Celery  â”‚ â”‚  Redis    â”‚
â”‚  App     â”‚ â”‚  Worker  â”‚ â”‚  Cache    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚        MySQL 8.0          â”‚
â”‚      (æ•°æ®åº“)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å®¹å™¨åŒ–éƒ¨ç½²æ¶æ„

```yaml
# docker-compose.yml
services:
  web:
    build: .
    ports: ["8000:8000"]
    depends_on:
      - db
      - redis

  db:
    image: mysql:8.0
    environment:
      MYSQL_DATABASE: better_laser_erp

  redis:
    image: redis:6.0

  nginx:
    image: nginx:latest
    ports: ["80:80", "443:443"]
```

## ğŸ”§ æŠ€æœ¯æ¶æ„è¯¦è§£

### 1. åç«¯æ¶æ„

#### Django åº”ç”¨æ¶æ„

```python
# settings.py åº”ç”¨é…ç½®
INSTALLED_APPS = [
    # Django æ ¸å¿ƒåº”ç”¨
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',

    # ç¬¬ä¸‰æ–¹åº”ç”¨
    'rest_framework',
    'django_filters',
    'corsheaders',

    # ä¸šåŠ¡åº”ç”¨
    'apps.core',
    'apps.authentication',
    'apps.users',
    'apps.departments',
    'apps.customers',
    'apps.suppliers',
    'apps.products',
    'apps.inventory',
    'apps.sales',
    'apps.purchase',
    'apps.finance',
    'apps.ai_assistant',
]
```

#### ä¸­é—´ä»¶æ¶æ„

```python
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
    'corsheaders.middleware.CorsMiddleware',  # CORS æ”¯æŒ
    'apps.core.middleware.TimezoneMiddleware',  # è‡ªå®šä¹‰æ—¶åŒºä¸­é—´ä»¶
]
```

### 2. æ•°æ®åº“æ¶æ„

#### æ•°æ®åº“è®¾è®¡åŸåˆ™

- **è§„èŒƒåŒ–**: éµå¾ªç¬¬ä¸‰èŒƒå¼ï¼Œå‡å°‘æ•°æ®å†—ä½™
- **ç´¢å¼•ä¼˜åŒ–**: ä¸ºå¸¸æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
- **å¤–é”®çº¦æŸ**: ä¿è¯æ•°æ®å®Œæ•´æ€§
- **è½¯åˆ é™¤**: ä¿ç•™å†å²æ•°æ®ï¼Œæ”¯æŒæ¢å¤

#### è¡¨è®¾è®¡è§„èŒƒ

```python
class Meta:
    # æ˜ç¡®æŒ‡å®šè¡¨å
    db_table = 'sales_salesorder'

    # æ˜¾ç¤ºåç§°
    verbose_name = 'é”€å”®è®¢å•'
    verbose_name_plural = 'é”€å”®è®¢å•'

    # é»˜è®¤æ’åº
    ordering = ['-created_at']

    # è”åˆç´¢å¼•
    indexes = [
        models.Index(fields=['customer', 'order_date']),
        models.Index(fields=['-created_at']),
    ]

    # æƒé™
    default_permissions = ('add', 'change', 'delete', 'view')
```

### 3. ç¼“å­˜æ¶æ„

#### Redis ç¼“å­˜ç­–ç•¥

```python
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.redis.RedisCache',
        'LOCATION': 'redis://127.0.0.1:6379/1',
        'OPTIONS': {
            'CLIENT_CLASS': 'django_redis.client.DefaultClient',
            'CONNECTION_POOL_KWARGS': {
                'max_connections': 50,
                'retry_on_timeout': True,
            }
        },
        'KEY_PREFIX': 'blerp',
        'TIMEOUT': 300,
    }
}

# ç¼“å­˜ä½¿ç”¨åœºæ™¯
# 1. ä¼šè¯ç¼“å­˜
# 2. æŸ¥è¯¢ç»“æœç¼“å­˜
# 3. æƒé™ç¼“å­˜
# 4. æ¨¡æ¿ç‰‡æ®µç¼“å­˜
```

### 4. å¼‚æ­¥ä»»åŠ¡æ¶æ„

#### Celery ä»»åŠ¡æ¶æ„

```python
# celery.py
from celery import Celery

app = Celery('blerp')
app.config_from_object('django.conf:settings', namespace='CELERY')
app.autodiscover_tasks()

# ä»»åŠ¡ç±»å‹
# 1. å®šæ—¶ä»»åŠ¡: æ•°æ®å¤‡ä»½ã€æŠ¥è¡¨ç”Ÿæˆ
# 2. å¼‚æ­¥ä»»åŠ¡: é‚®ä»¶å‘é€ã€æ•°æ®å¯¼å…¥
# 3. å‘¨æœŸä»»åŠ¡: çŠ¶æ€æ›´æ–°ã€é€šçŸ¥å‘é€
```

## ğŸ“Š æ¶æ„ä¼˜åŠ¿åˆ†æ

### ä¼˜åŠ¿

1. **æ¨¡å—åŒ–è®¾è®¡**
   - âœ… é«˜å†…èšä½è€¦åˆ
   - âœ… æ˜“äºç»´æŠ¤å’Œæ‰©å±•
   - âœ… æ”¯æŒå›¢é˜Ÿåä½œå¼€å‘

2. **ç»Ÿä¸€åŸºç¡€æ¶æ„**
   - âœ… ä»£ç å¤ç”¨ç‡é«˜
   - âœ… é™ä½ç»´æŠ¤æˆæœ¬
   - âœ… ä¿è¯æ•°æ®ä¸€è‡´æ€§

3. **å®Œå–„çš„ä¸šåŠ¡æµç¨‹**
   - âœ… ä¸šåŠ¡é—­ç¯å®Œæ•´
   - âœ… æµç¨‹æ¸…æ™°åˆç†
   - âœ… æ”¯æŒå¤æ‚ä¸šåŠ¡åœºæ™¯

4. **ç°ä»£åŒ–æŠ€æœ¯æ ˆ**
   - âœ… æŠ€æœ¯å…ˆè¿›ç¨³å®š
   - âœ… ç¤¾åŒºæ”¯æŒè‰¯å¥½
   - âœ… ä¾¿äºäººæ‰æ‹›è˜

### æ”¹è¿›å»ºè®®

1. **æ€§èƒ½ä¼˜åŒ–**
   - âš ï¸ å¢åŠ æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
   - âš ï¸ å®ç°æ›´ç»†ç²’åº¦çš„ç¼“å­˜
   - âš ï¸ æ·»åŠ  API é™æµ

2. **ç›‘æ§å‘Šè­¦**
   - âš ï¸ å®Œå–„åº”ç”¨ç›‘æ§
   - âš ï¸ æ·»åŠ æ€§èƒ½è¿½è¸ª
   - âš ï¸ å®ç°å¼‚å¸¸å‘Šè­¦

3. **æµ‹è¯•è¦†ç›–**
   - âš ï¸ æé«˜å•å…ƒæµ‹è¯•è¦†ç›–ç‡
   - âš ï¸ å¢åŠ é›†æˆæµ‹è¯•
   - âš ï¸ å®Œå–„ç«¯åˆ°ç«¯æµ‹è¯•

## ğŸ¯ æ¶æ„æ¼”è¿›æ–¹å‘

### çŸ­æœŸä¼˜åŒ–
- æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- API å“åº”æ—¶é—´ä¼˜åŒ–
- å‰ç«¯æ€§èƒ½ä¼˜åŒ–

### ä¸­æœŸæ¼”è¿›
- å¾®æœåŠ¡åŒ–æ‹†åˆ†
- æ¶ˆæ¯é˜Ÿåˆ—é›†æˆ
- åˆ†å¸ƒå¼ç¼“å­˜

### é•¿æœŸè§„åˆ’
- äº‘åŸç”Ÿæ¶æ„
- å¤šç§Ÿæˆ·æ”¯æŒ
- å¤§æ•°æ®åˆ†æé›†æˆ

BLERP çš„ç³»ç»Ÿæ¶æ„è®¾è®¡åˆç†ã€æŠ€æœ¯é€‰å‹å…ˆè¿›ã€æ‰©å±•æ€§è‰¯å¥½ï¼Œä¸ºä¼ä¸šçš„æ•°å­—åŒ–è½¬å‹æä¾›äº†åšå®çš„æŠ€æœ¯åŸºç¡€ã€‚
